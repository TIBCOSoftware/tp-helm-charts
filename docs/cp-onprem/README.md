# CP On Prem
## Deploying CP On prem

### create namespace
```bash
  kubectl apply -f - <<EOF
    apiVersion: v1
    kind: Namespace
    metadata:
      name: tibco-cp
      labels:
        app.cloud.tibco.com/content: tibco-core
EOF
```
### Global values
Global values configuration required to deploy Control plane charts. 

#### prod/stag
```yaml
global:
  # external section values are customer input
  external:
    # shared storage pvc spec. Used to create a shared PVC used across control plane. https://kubernetes.io/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims
    storage:
      resources:
        requests:
          storage: 2Gi
      # PV name
      volumeName: ""  
      # Storage class name
      storageClassName: ""
    # customer managed tunnel dns. This is backed by an NLB and TIBCO HPO handles the traffic. 
    dnsTunnelDomain: local.tunnel.cic2.pro
    # customer managed control plane dns. Control Plane UI is accessible over this dns. This is backed an ALB and TIBCO Router. 
    dnsDomain: local.my.cic2.pro
    # cluster info used to define rules and policies
    clusterInfo:
      # k8s node CIDR used to define network policies
      nodeCIDR: 10.245.2.128/25
      # k8s pod CIDR used to define network policies
      podCIDR: 192.168.0.0/16
  #  #Postgres RDS info.  
  #   postgresDbInfo: 
  #     dbHost: 10.245.2.2 
  #     username: postgres # this user need to be admin user
  #     password: postgres # this user need to be admin user
  #     dbPort: 5432
  # tibco section is tibco specific config generated by tibco for customers.
  tibco:
    # control plane installation Id. Ex: prod, stag, p01, s01. This is to identify multiple cp installation in same cluster.
    # lowercase alphanumeric string of max 10 chars  
    cpId: "local"
    # Service account in release namespace. This is shared by all the control plane components. CP only need this service account. If not passed then default service
    # account is created.
    serviceAccount: ""
    # container registry where container images are stored. 
    containerRegistry:
      url: reldocker.tibco.com    
      # in case of private registry pass username and password
      # username: "test"
      # password: "test"

    # captures microservices logs and send it to ES.
    enableLogging: true

  
```