#
# Copyright Â© 2024. Cloud Software Group, Inc.
# This file is subject to the license terms contained
# in the license file that is distributed with this file.
#

global:
  tibco:
    self_hosted_deployment: true
    idm_cp_jwt_keystore_url: "/private/tsc/config/idm/own-keystores/jwt.p12"
    idm_cp_tibcoaccounts_keystore_url: "/private/tsc/config/idm/own-keystores/cic_cloud.p12"
    idm_cp_self_generated_keystore_url: "/private/tsc/config/idm/own-keystores/on-prem-idm.p12"
    idm_cp_tibcoaccounts_certs: "/private/tsc/config/idm/own-keystores/TA_certs.pem"
    region: "global"
    region_to_prefix: ""
    db_ssl_root_cert_secretname: "db-ssl-root-cert"
    db_ssl_root_cert_filename: "db_ssl_root.cert"
    image_name:
      identityManagement: ""
    image_repo_path: ""
    logging:
      fluentbit:
        image:
          name: "common-fluentbit"
          tag: 4.0.0
    check_dependencies:
      distroless_debian:
        name: "common-distroless-base-debian-debug"
        tag: 12
  external:
    region: ""
    enableLogging: false
    environment: ""

  # Pod Security Context configuration
  # This configuration ensures that the pod is run with non-root privileges for enhanced security.
  # The user, group, and filesystem group IDs are all set to 1000.
  # The filesystem group change policy is set to "Always", meaning the filesystem group is always set to the fsGroup.
  # The seccomp (secure computing mode) profile is set to RuntimeDefault, which means it uses the default profile provided by the runtime.
  # The sysctls configuration allows the platform hybrid proxy to bind to low ports (below 1024) as a non-root user.
  # This is achieved by setting the 'net.ipv4.ip_unprivileged_port_start' sysctl to 0.
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
    fsGroupChangePolicy: "Always"
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: true
    capabilities:
      drop:
        - ALL
        - CAP_NET_RAW

idm:
  resources:
    requests:
      cpu: "200m"
      memory: "1024Mi"
    limits:
      cpu: "500m"
      memory: "2048Mi"
fluentbit:
  resources:
    requests:
      cpu: "50m"
      memory: "100Mi"
    limits:
      cpu: "100m"
      memory: "150Mi"
checkPodDependencies:
  resources:
    requests:
      cpu: "10m"
      memory: "20Mi"
    limits:
      cpu: "30m"
      memory: "40Mi"

hpa:
  cpu: 70
  memory: 70

replicaCount: "1"
