# this generates the secrets from the secrets in values
{{- if .Values.finops.secrets }}
{{- $ns := (include "tp-cp-finops.consts.namespace" .) }}
{{- range .Values.finops.secrets }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .name }}
  namespace: {{ $ns }}
type: Opaque
data:
  {{ .username }}: {{ .password | b64enc }}
  {{- end}}
{{- end }}