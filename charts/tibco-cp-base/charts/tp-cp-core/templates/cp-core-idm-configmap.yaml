#
# Copyright Â© 2025. Cloud Software Group, Inc.
# This file is subject to the license terms contained
# in the license file that is distributed with this file.
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: cp-core-idm-config
  namespace: {{ include "tp-control-plane.consts.namespace" . }}
  labels:
    {{- include "tp-control-plane.shared.labels.standard" . | nindent 4 }}
data:
{{- if .Values.global.tibco.self_hosted_deployment }}
  {{- range $path, $file := .Files.Glob "files/tsc/config-core/idm/**/*" }}
    {{ $path | replace "/" "__" | replace "config-core" "config" }}: |-
{{ toString $file | indent 6 }}
    {{- end }}
    {{- range $path, $file := .Files.Glob "files/tsc/config-core/idm/*" }}
    {{ $path | replace "/" "__" | replace "config-core" "config" }}: |-
{{ toString $file | indent 6 }}
  {{- end }}
{{- else }}
  {{- range $path, $file := .Files.Glob "files/tsc/config/idm/**/*" }}
    {{ $path | replace "/" "__" }}: |-
{{ toString $file | indent 6 }}
  {{- end }}
  {{- range $path, $file := .Files.Glob "files/tsc/config/idm/*" }}
    {{ $path | replace "/" "__" }}: |-
{{ toString $file | indent 6 }}
  {{- end }}
{{- end -}}
